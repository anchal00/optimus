name: optimus CI ðŸš€

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  Build:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - name: Set up Python 3.9
        id: setup-python
        uses: actions/setup-python@v2
        with:
          python-version: "3.9"
      - name: Building optimus server
        run: |
          python -m pip install --upgrade pip
          python setup.py install
          pip install -r requirements-dev.txt
    Test:
      runs-on: ubuntu-latest
      steps:
        - name: Check out repository code
          uses: actions/checkout@v4
        - name: Set up Python 3.9
          id: setup-python
          uses: actions/setup-python@v2
          with:
            python-version: "3.9"
        - name: Install deps
          run: pip install -r requirements-dev.txt
        - name: Running Tests
          run: python -m unittest -v
    Lint:
      runs-on: ubuntu-latest
      steps:
        - name: Check out repository code
          uses: actions/checkout@v4
        - name: Run static type checker
          uses: jpetrucciani/mypy-check@master
          with:
            mypy_flags: '--config-file pyproject.toml'
        - name: Checking imports
          uses: isort/isort-action@master
        - name: Checking File Formatting
          uses: suo/flake8-github-action@releases/v1
